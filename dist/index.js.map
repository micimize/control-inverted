{"version":3,"sources":["webpack:///webpack/bootstrap eb4a7214626f41b61c4d","webpack:///./src/resolve.js","webpack:///external \"strictduck\"","webpack:///./src/depends.js","webpack:///./src/composit.js","webpack:///./src/index.js","webpack:///./src/provides.js","webpack:///./src/typedMap.js","webpack:///external \"bottlejs\"","webpack:///external \"get-prototype-chain\""],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap eb4a7214626f41b61c4d\n **/","import getPrototypeChain from 'get-prototype-chain'\nimport { utils } from 'strictduck'\n\nexport function satisfies({provider, dependency}){\n    return getPrototypeChain(provider)\n        .filter(p => (\n            utils.equals(p, dependency) ||\n            utils.is({instance: p, Class: dependency}) ||\n            p === dependency ||\n            p instanceof dependency ||\n            p.constructor.name == dependency\n        )).length > 0\n}\n\nexport function findSatisfier({container, dependency}){\n    let satisfierArr = Object.keys(container.providers).filter(key => satisfies({\n        provider: container.providers[key], dependency\n    }))\n    let satisfier = satisfierArr.length && satisfierArr[0]\n    return satisfier ? container[satisfier] : Error(`${dependency.name} is unsatsified!`)\n}\n\nexport default function resolve({container, dependencies}){\n    return dependencies.reduce(\n        (resolved, dependency) => {\n        resolved[dependency.name || dependency.constructor.name] = findSatisfier({\n            container,\n            dependency\n        })\n        return resolved\n    }, {})\n}\n\nexport function objectContainsOnly({strictduck, object}){\n    return Object.keys(object).filter(\n        k => !satisfies({ provider: object[k], dependency: strictduck })\n    ).length == 0\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/resolve.js\n **/","module.exports = require(\"strictduck\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"strictduck\"\n ** module id = 2\n ** module chunks = 0\n **/","import StrictDuck, { utils } from 'strictduck'\nimport resolve from './resolve'\n\nexport default function depends({\n    name, parent=StrictDuck,\n    dependencies=[], constructor: c = (...args) => args\n}) {\n    return utils.nameClass({\n        name: name || parent.name,\n        Class: class extends parent {\n            constructor({container, ...rest}){\n                super(...c({\n                    ...resolve({container, dependencies}),\n                    ...rest\n                }))\n            }\n        }\n    })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/depends.js\n **/","import StrictDuck, { Main, implement, utils  } from 'strictduck'\nimport Bottle from 'bottlejs'\nimport depends from './depends'\nimport resolve, { findSatisfier } from './resolve'\n\nfunction materializer(service){\n    return (container => new service({container}))\n}\n\nclass Composit extends StrictDuck {\n    constructor({\n        main: {\n            Class: mainClass = Main,\n            method: mainMethod = 'main'\n        }\n    }, ...services){\n        let providerMap = {}\n        super(\n            services.reduce(\n                (context, {dependency, provider}) => {\n                    let name = provider.name || provider.constructor.name\n                    providerMap[name] = provider\n\n                    if(provider instanceof dependency) {\n                        context.value(name, provider)\n                    } else {\n                        context.factory(name, materializer(provider))\n                    }\n                    return context\n                }\n                , new Bottle()\n            )\n         )\n         this.value('providers', providerMap)\n         let mainSatisfier = findSatisfier({ container: this.container, dependency: mainClass })\n         this.main = (kwargs, ...args) => mainSatisfier[mainMethod]({container: this.container, ...kwargs}, ...args)\n    }\n}\n\nexport default implement({ strictduck: Main, withClass: Composit })\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/composit.js\n **/","export depends from './depends'\nexport provides from './provides'\nexport * as resolve from './resolve'\n\nexport typedMap from './typedMap'\n\nexport Composit from './composit'\nexport default from './composit'\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import StrictDuck, { utils, extend, implement  } from 'strictduck'\nimport resolve from './resolve'\n\nexport const Provider = extend({ name: 'Provider', methods: ['provide'] })\n\nexport default function provides({\n    name, provider,\n    parent = StrictDuck,\n    dependencies=[]\n}) {\n    return utils.nameClass({\n        name: name || parent.name,\n        Class: class extends parent {\n            constructor(...args){\n                super(...args)\n                this.provide = function provide({container, ...kwargs}={container: {}}, ...pargs){\n                    return provider.bind(this)({\n                        ...resolve({container, dependencies}),\n                        ...kwargs\n                    }, ...pargs)\n                }.bind(this)\n            }\n        }\n    })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/provides.js\n **/","import { extend, utils } from 'strictduck'\nimport { objectContainsOnly } from './resolve'\n\nexport default function typedMap({\n    name, strictduck=StrictDuck\n}) {\n    return utils.nameClass({\n        name: name || `${strictduck.name}Map`,\n        Class: class extends extend({name: 'Map'}) {\n            constructor(object){\n                objectContainsOnly({strictduck, object})\n                super(object)\n            }\n        }\n    })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/typedMap.js\n **/","module.exports = require(\"bottlejs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bottlejs\"\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = require(\"get-prototype-chain\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"get-prototype-chain\"\n ** module id = 9\n ** module chunks = 0\n **/"],"sourceRoot":""}